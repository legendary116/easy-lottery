<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>年会抽奖系统</title>
    <!-- 引入Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- 引入Font Awesome -->
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container mt-5">
        <div class="card">
            <div class="card-header">
                <i class="fa fa-trophy" aria-hidden="true"></i> 年会抽奖系统
            </div>
            
            <div class="card-body">
                <!-- 导航标签 -->
                <ul class="nav nav-tabs" id="lotteryTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="lottery-tab" data-bs-toggle="tab" data-bs-target="#lottery" type="button" role="tab" aria-controls="lottery" aria-selected="true">
                            <i class="fa fa-random" aria-hidden="true"></i> 抽奖
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="manage-tab" data-bs-toggle="tab" data-bs-target="#manage" type="button" role="tab" aria-controls="manage" aria-selected="false">
                            <i class="fa fa-users" aria-hidden="true"></i> 人员管理
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="settings-tab" data-bs-toggle="tab" data-bs-target="#settings" type="button" role="tab" aria-controls="settings" aria-selected="false">
                            <i class="fa fa-cog" aria-hidden="true"></i> 设置
                        </button>
                    </li>
                </ul>
                
                <!-- 标签内容 -->
                <div class="tab-content mt-4" id="lotteryTabsContent">
                    <!-- 抽奖页面 -->
                    <div class="tab-pane fade show active" id="lottery" role="tabpanel" aria-labelledby="lottery-tab">
                        <div class="lottery-fullscreen" id="lotteryFullscreen">
                            <button type="button" class="drawer-toggle" id="drawerToggle" aria-label="展开抽奖结果">
                                <i class="fa fa-angle-right" aria-hidden="true"></i>
                            </button>
                            <div class="drawer-backdrop" id="drawerBackdrop"></div>
                            <aside class="result-drawer" id="resultDrawer">
                                <div class="drawer-header">
                                    <h5>抽奖结果 <span class="count-badge" id="resultCount">0</span></h5>
                                    <button type="button" class="drawer-close" id="drawerClose" aria-label="关闭结果面板">
                                        <i class="fa fa-times" aria-hidden="true"></i>
                                    </button>
                                </div>
                                <div class="drawer-body">
                                    <div class="table-container">
                                        <table class="table table-striped table-hover">
                                            <thead>
                                                <tr>
                                                    <th>序号</th>
                                                    <th>姓名</th>
                                                    <th>号码</th>
                                                    <th>类型</th>
                                                    <th>中奖时间</th>
                                                </tr>
                                            </thead>
                                            <tbody id="resultTable"></tbody>
                                        </table>
                                    </div>
                                </div>
                            </aside>

                            <div class="lottery-stage">
                                <!-- 抽奖球体区域 -->
                                <div class="lottery-area" id="lotteryArea">
                                    <div class="globe-container" id="globeContainer">
                                        <!-- 3D球体效果 -->
                                    </div>
                                    <div class="lottery-info">
                                        <div class="lottery-number" id="lotteryNumber">000</div>
                                        <div class="lottery-name" id="lotteryName">准备抽奖</div>
                                    </div>
                                </div>

                                <div class="lottery-controls text-center">
                                    <button type="button" class="lottery-btn btn btn-primary" id="startBtn">
                                        <i class="fa fa-play" aria-hidden="true"></i> 开始抽奖
                                    </button>
                                    <button type="button" class="lottery-btn btn btn-success" id="stopBtn" disabled>
                                        <i class="fa fa-stop" aria-hidden="true"></i> 停止抽奖
                                    </button>
                                    <button type="button" class="lottery-btn btn btn-danger" id="resetBtn">
                                        <i class="fa fa-refresh" aria-hidden="true"></i> 重置抽奖
                                    </button>
                                    <button type="button" class="lottery-btn btn btn-warning" id="fullscreenToggle">
                                        <i class="fa fa-arrows-alt" aria-hidden="true"></i> 全屏展示
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="mt-4 inline-result-section">
                            <h5>抽奖结果 <span class="count-badge" id="resultCountInline">0</span></h5>
                            <div class="table-container">
                                <table class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <th>序号</th>
                                            <th>姓名</th>
                                            <th>号码</th>
                                            <th>类型</th>
                                            <th>中奖时间</th>
                                        </tr>
                                    </thead>
                                    <tbody id="resultTableInline"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 人员管理页面 -->
                    <div class="tab-pane fade" id="manage" role="tabpanel" aria-labelledby="manage-tab">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="import-area">
                                    <h5><i class="fa fa-upload" aria-hidden="true"></i> Excel导入</h5>
                                    <div class="mb-3">
                                        <label for="userExcel" class="form-label">员工名单 (姓名, 号码)</label>
                                        <input class="form-control" type="file" id="userExcel" accept=".xlsx, .xls">
                                    </div>
                                    <div class="mb-3">
                                        <label for="bossExcel" class="form-label">老板名单 (姓名, 号码)</label>
                                        <input class="form-control" type="file" id="bossExcel" accept=".xlsx, .xls">
                                    </div>
                                </div>
                                
                                <div class="mb-4">
                                    <h5><i class="fa fa-plus" aria-hidden="true"></i> 手动添加</h5>
                                    <form id="addForm">
                                        <div class="row">
                                            <div class="col-md-5">
                                                <input type="text" class="form-control" id="addName" placeholder="姓名" required>
                                            </div>
                                            <div class="col-md-5">
                                                <input type="text" class="form-control" id="addNumber" placeholder="号码" required>
                                            </div>
                                            <div class="col-md-2">
                                                <select class="form-control" id="addType">
                                                    <option value="user">员工</option>
                                                    <option value="boss">老板</option>
                                                </select>
                                            </div>
                                        </div>
                                        <button type="submit" class="btn btn-primary mt-2">
                                            <i class="fa fa-save" aria-hidden="true"></i> 保存
                                        </button>
                                    </form>
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <h5><i class="fa fa-list" aria-hidden="true"></i> 人员列表</h5>
                                <div class="table-container">
                                    <table class="table table-striped table-hover">
                                        <thead>
                                            <tr>
                                                <th>姓名</th>
                                                <th>号码</th>
                                                <th>类型</th>
                                                <th>操作</th>
                                            </tr>
                                        </thead>
                                        <tbody id="userTable"></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 设置页面 -->
                    <div class="tab-pane fade" id="settings" role="tabpanel" aria-labelledby="settings-tab">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="alert alert-info">
                                    <h5><i class="fa fa-info-circle" aria-hidden="true"></i> 系统信息</h5>
                                    <p>当前剩余抽奖人数: <span id="remainingCount">0</span></p>
                                    <p>已抽中人数: <span id="winnerCount">0</span></p>
                                    <p>老板人数: <span id="bossCount">0</span></p>
                                    <p>员工人数: <span id="userCount">0</span></p>
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="alert alert-secondary">
                                    <h5><i class="fa fa-toggle-on" aria-hidden="true"></i> 抽奖设置</h5>
                                    <div class="form-check form-switch mb-3">
                                        <input class="form-check-input" type="checkbox" id="bossKeepInPool" style="width: 50px; height: 25px;">
                                        <label class="form-check-label" for="bossKeepInPool">
                                            老板中奖后留在抽奖池
                                        </label>
                                    </div>
                                    <p class="text-sm text-muted mb-3">开启后，老板中奖后可以继续参与抽奖；关闭后，老板中奖后将从抽奖池中移除。</p>

                                    <div class="mb-3">
                                        <label class="form-label">抽奖停止方式</label>
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" id="autoStopEnabled" style="width: 50px; height: 25px;">
                                            <label class="form-check-label" for="autoStopEnabled">
                                                自动停止抽奖
                                            </label>
                                        </div>
                                    </div>

                                    <div class="mb-3" id="autoStopDurationContainer" style="display: none;">
                                        <label for="autoStopDuration" class="form-label">自动停止时长（秒）</label>
                                        <input type="number" class="form-control" id="autoStopDuration" min="3" max="30" value="5">
                                        <p class="text-sm text-muted">建议 3-30 秒</p>
                                    </div>
                                </div>

                                <div class="alert alert-warning">
                                    <h5><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> 数据管理</h5>
                                    <button type="button" class="btn btn-danger mb-2" id="clearDataBtn">
                                        <i class="fa fa-trash" aria-hidden="true"></i> 清空所有数据
                                    </button>
                                    <p class="text-sm text-muted">注意：此操作将删除所有本地存储的数据，包括抽奖名单和结果。</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 模态框 -->
    <div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editModalLabel">编辑人员信息</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="editForm">
                        <input type="hidden" id="editId">
                        <div class="mb-3">
                            <label for="editName" class="form-label">姓名</label>
                            <input type="text" class="form-control" id="editName" required>
                        </div>
                        <div class="mb-3">
                            <label for="editNumber" class="form-label">号码</label>
                            <input type="text" class="form-control" id="editNumber" required>
                        </div>
                        <div class="mb-3">
                            <label for="editType" class="form-label">类型</label>
                            <select class="form-control" id="editType">
                                <option value="user">员工</option>
                                <option value="boss">老板</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">关闭</button>
                    <button type="button" class="btn btn-primary" id="saveEditBtn">保存</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 引入必要的JavaScript库 -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>
    <script src="app.js"></script>
</body>
</html>
